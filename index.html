<!DOCTYPE html>
<html lang="nl">

<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17574614935"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17574614935');
</script>


  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>stockflow: Gratis Voorraadbeheer</title>
  <link rel="icon" href="/favicon.ico" />
  <meta name="description" content="Ontdek hoe stockflow jou helpt bij het beheren van jouw voorraad, Efficiënt en Gratis. Probeer het nu!" />
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    connect-src 'self' https://sszuxnqhbxauvershuys.supabase.co wss://sszuxnqhbxauvershuys.supabase.co https://www.google-analytics.com https://www.google.com https://www.googletagmanager.com https://googleads.g.doubleclick.net https://www.googleadservices.com https://api.stripe.com https://checkout.stripe.com https://api.ipify.org https://translate.googleapis.com https://translate.google.com https://clients5.google.com;
    script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.googleadservices.com https://googleads.g.doubleclick.net https://www.google.com https://js.stripe.com https://translate.googleapis.com https://translate.google.com https://cdn.gtranslate.net https://clients5.google.com;
    frame-src 'self' https://www.googletagmanager.com https://www.googleadservices.com https://googleads.g.doubleclick.net https://www.google.com https://td.doubleclick.net https://checkout.stripe.com https://js.stripe.com https://translate.googleapis.com https://translate.google.com https://clients5.google.com;
    font-src 'self' https://fonts.gstatic.com https://fonts.googleapis.com;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
    img-src 'self' data: https:;
  ">
  <!-- CSS Loading with fallback -->
  <link rel="stylesheet" href="/src/index.css" onerror="console.log('CSS loaded via Vite')">
  <link rel="stylesheet" href="/src/App.css" onerror="console.log('CSS loaded via Vite')">
  <style>
    /* Critical CSS: minimal layout voor snelle eerste render */
    html,body{min-height:100vh;margin:0;padding:0;width:100%;background:#fff;}
    #root{width:100vw;margin:0 auto;}
  </style>
</head>

<body>
  
  <div id="root"></div>
  
  <!-- Smart Translation Solution (Localhost Compatible) -->
  <div id="google_translate_element" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; display: block;"></div>
  
  <script type="text/javascript">
    // Smart Translation Implementation with Localhost Support
    let translationInitialized = false;
    const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
    
    function googleTranslateElementInit() {
      if (translationInitialized) return;
      translationInitialized = true;
      
      console.log('🌐 Google Translate initializing...');
      
      try {
        // Initialize Google Translate
        new google.translate.TranslateElement({
          pageLanguage: 'nl',
          includedLanguages: 'en,fr,de,es,it,pt,ru,ja,ko,zh,ar,hi,tr,pl,sv,da,no,fi,cs,hu,ro,bg,hr,sk,sl,et,lv,lt,mt,cy,ga,is,lb,eu,ca,gl',
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
          autoDisplay: false
        }, 'google_translate_element');
        
        console.log('✅ Google Translate initialized successfully');
        
        // Auto-translate logic (only for production)
        if (!isLocalhost) {
          const browserLang = navigator.language || navigator.userLanguage;
          const primaryLang = browserLang.split('-')[0];
          const supportedLanguages = ['en', 'fr', 'de', 'es', 'it', 'pt', 'ru', 'ja', 'ko', 'zh', 'ar', 'hi', 'tr', 'pl', 'sv', 'da', 'no', 'fi', 'cs', 'hu', 'ro', 'bg', 'hr', 'sk', 'sl', 'et', 'lv', 'lt', 'mt', 'cy', 'ga', 'is', 'lb', 'eu', 'ca', 'gl'];
          
          console.log('🌐 Browser Language:', browserLang);
          console.log('🔤 Primary Language:', primaryLang);
          
          // Auto-translate if not Dutch and supported
          if (primaryLang !== 'nl' && supportedLanguages.includes(primaryLang)) {
            console.log('🔄 Auto-translating to:', primaryLang);
            
            // Wait for element to be available
            const waitForElement = () => {
              const selectElement = document.querySelector('.goog-te-combo');
              if (selectElement && selectElement.options.length > 1) {
                selectElement.value = primaryLang;
                selectElement.dispatchEvent(new Event('change'));
                console.log('✅ Auto-translation activated to:', primaryLang);
              } else {
                setTimeout(waitForElement, 500);
              }
            };
            
            setTimeout(waitForElement, 1000);
          } else {
            console.log('🇳🇱 Dutch browser detected, manual translation available');
          }
        }
        
      } catch (error) {
        console.error('❌ Google Translate initialization failed:', error);
      }
    }
    
    // Localhost fallback implementation
    function createLocalhostFallback() {
      console.log('🏠 Creating localhost fallback translation widget');
      
      const widget = document.getElementById('google_translate_element');
      if (!widget) return;
      
      // Ensure widget is visible
      widget.style.display = 'block';
      widget.style.visibility = 'visible';
      widget.style.opacity = '1';
      
      widget.innerHTML = `
        <div style="
          background: #fff;
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 12px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          font-family: Arial, sans-serif;
          font-size: 14px;
          min-width: 200px;
          max-width: 300px;
          display: block !important;
          visibility: visible !important;
          opacity: 1 !important;
        ">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <div style="font-weight: bold; color: #333; display: flex; align-items: center; gap: 8px;">
              🌐 Translate Page
            </div>
          </div>
          
          <div style="margin-bottom: 12px;">
            <select id="localhost-language-selector" style="
              width: 100%;
              padding: 8px;
              border: 1px solid #ddd;
              border-radius: 4px;
              font-size: 14px;
              background: #fff;
              cursor: pointer;
            ">
              <option value="nl">🇳🇱 Nederlands</option>
              <option value="en">🇺🇸 English</option>
              <option value="fr">🇫🇷 Français</option>
              <option value="de">🇩🇪 Deutsch</option>
              <option value="es">🇪🇸 Español</option>
              <option value="it">🇮🇹 Italiano</option>
              <option value="pt">🇵🇹 Português</option>
              <option value="ru">🇷🇺 Русский</option>
              <option value="ja">🇯🇵 日本語</option>
              <option value="ko">🇰🇷 한국어</option>
              <option value="zh">🇨🇳 中文</option>
              <option value="ar">🇸🇦 العربية</option>
              <option value="hi">🇮🇳 हिन्दी</option>
              <option value="tr">🇹🇷 Türkçe</option>
              <option value="pl">🇵🇱 Polski</option>
              <option value="sv">🇸🇪 Svenska</option>
              <option value="da">🇩🇰 Dansk</option>
              <option value="no">🇳🇴 Norsk</option>
              <option value="fi">🇫🇮 Suomi</option>
              <option value="cs">🇨🇿 Čeština</option>
              <option value="hu">🇭🇺 Magyar</option>
              <option value="ro">🇷🇴 Română</option>
              <option value="bg">🇧🇬 Български</option>
              <option value="hr">🇭🇷 Hrvatski</option>
              <option value="sk">🇸🇰 Slovenčina</option>
              <option value="sl">🇸🇮 Slovenščina</option>
              <option value="et">🇪🇪 Eesti</option>
              <option value="lv">🇱🇻 Latviešu</option>
              <option value="lt">🇱🇹 Lietuvių</option>
              <option value="mt">🇲🇹 Malti</option>
              <option value="cy">🇬🇧 Cymraeg</option>
              <option value="ga">🇮🇪 Gaeilge</option>
              <option value="is">🇮🇸 Íslenska</option>
              <option value="lb">🇱🇺 Lëtzebuergesch</option>
              <option value="eu">🇪🇸 Euskera</option>
              <option value="ca">🇪🇸 Català</option>
              <option value="gl">🇪🇸 Galego</option>
            </select>
          </div>
          
          <div style="margin-bottom: 12px;">
            <button id="localhost-translate-button" style="
              width: 100%;
              padding: 10px;
              background: linear-gradient(135deg, #4285f4, #34a853);
              color: white;
              border: none;
              border-radius: 6px;
              font-size: 14px;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.2s;
            ">Translate Page</button>
          </div>
          
          <div style="
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 12px;
            color: #666;
            text-align: center;
            border-left: 4px solid #4285f4;
          ">
            <strong>Development Mode</strong><br>
            Translation opens in new tab
          </div>
        </div>
      `;
      
      // Add event listeners
      const selector = document.getElementById('localhost-language-selector');
      const button = document.getElementById('localhost-translate-button');
      
      if (selector && button) {
        button.addEventListener('click', () => {
          const selectedLang = selector.value;
          console.log('🔄 Opening translation for:', selectedLang);
          
          const translateUrl = `https://translate.google.com/translate?sl=nl&tl=${selectedLang}&u=${encodeURIComponent(window.location.href)}`;
          window.open(translateUrl, '_blank');
        });
        
        // Set browser language as default if not Dutch
        const browserLang = navigator.language || navigator.userLanguage;
        const primaryLang = browserLang.split('-')[0];
        const supportedLanguages = ['en', 'fr', 'de', 'es', 'it', 'pt', 'ru', 'ja', 'ko', 'zh', 'ar', 'hi', 'tr', 'pl', 'sv', 'da', 'no', 'fi', 'cs', 'hu', 'ro', 'bg', 'hr', 'sk', 'sl', 'et', 'lv', 'lt', 'mt', 'cy', 'ga', 'is', 'lb', 'eu', 'ca', 'gl'];
        
        if (primaryLang !== 'nl' && supportedLanguages.includes(primaryLang)) {
          selector.value = primaryLang;
          console.log('🔄 Set default language to:', primaryLang);
        }
      }
    }
    
    // Initialize translation based on environment
    if (isLocalhost) {
      console.log('🏠 Localhost detected, using fallback implementation');
      setTimeout(createLocalhostFallback, 1000);
    } else {
      console.log('🌐 Production environment, loading Google Translate');
      
      // Load Google Translate script only for production
      const script = document.createElement('script');
      script.src = 'https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
      script.async = true;
      script.crossOrigin = 'anonymous';
      
      script.onerror = () => {
        console.log('🏠 Localhost detected - using fallback translation widget');
        createLocalhostFallback();
      };
      
      document.head.appendChild(script);
    }
  </script>
  
  <!-- Development Debug Script (localhost only) -->
  <script type="text/javascript">
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
      const debugScript = document.createElement('script');
      debugScript.src = '/debug-translation.js';
      debugScript.defer = true;
      document.head.appendChild(debugScript);
      
      const testScript = document.createElement('script');
      testScript.src = '/test-translation.js';
      testScript.defer = true;
      document.head.appendChild(testScript);
    }
  </script>
  
  <script type="module" src="/src/main.tsx" defer></script>
</body>

</html>
<!DOCTYPE html>
<html lang="nl">

<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17574614935"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17574614935');
</script>


  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>stockflow: Gratis Voorraadbeheer</title>
  <link rel="icon" href="/favicon.ico" />
  <meta name="description" content="Ontdek hoe stockflow jou helpt bij het beheren van jouw voorraad, EfficiÃ«nt en Gratis. Probeer het nu!" />
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    connect-src 'self' https://sszuxnqhbxauvershuys.supabase.co wss://sszuxnqhbxauvershuys.supabase.co https://www.google-analytics.com https://www.google.com https://www.googletagmanager.com https://googleads.g.doubleclick.net https://www.googleadservices.com https://api.stripe.com https://checkout.stripe.com https://api.ipify.org https://translate.googleapis.com https://translate.google.com https://clients5.google.com *.google.com;
    script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.googleadservices.com https://googleads.g.doubleclick.net https://www.google.com https://js.stripe.com https://translate.googleapis.com https://translate.google.com https://cdn.gtranslate.net https://clients5.google.com *.google.com;
    frame-src 'self' https://www.googletagmanager.com https://www.googleadservices.com https://googleads.g.doubleclick.net https://www.google.com https://td.doubleclick.net https://checkout.stripe.com https://js.stripe.com https://translate.googleapis.com https://translate.google.com https://clients5.google.com *.google.com;
    font-src 'self' https://fonts.gstatic.com https://fonts.googleapis.com;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
    img-src 'self' data: https:;
  ">
  <!-- CSS Loading with fallback -->
  <link rel="stylesheet" href="/src/index.css" onerror="console.log('CSS loaded via Vite')">
  <link rel="stylesheet" href="/src/App.css" onerror="console.log('CSS loaded via Vite')">
  <style>
    /* Critical CSS: minimal layout voor snelle eerste render */
    html,body{min-height:100vh;margin:0;padding:0;width:100%;background:#fff;}
    #root{width:100vw;margin:0 auto;}
  </style>
</head>

<body>
  
  <div id="root"></div>
  
  <!-- Production-Optimized Translation Solution -->
  <div id="google_translate_element" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; display: block;"></div>
  
  <script type="text/javascript">
    // Production-Optimized Translation Implementation
    (function() {
      'use strict';
      
      let translationInitialized = false;
      let translationStartTime = performance.now();
      const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
      const isProduction = !isLocalhost && window.location.protocol === 'https:';
      
      // Performance tracking
      function trackTranslationEvent(event, data = {}) {
        if (typeof gtag !== 'undefined') {
          gtag('event', event, {
            event_category: 'Translation',
            event_label: data.language || 'unknown',
            value: data.performance || 0,
            ...data
          });
        }
        
        // Console logging for development
        if (isLocalhost) {
          console.log(`ğŸ“Š Translation Event: ${event}`, data);
        }
      }
      
      // Optimized Google Translate initialization
      function googleTranslateElementInit() {
        if (translationInitialized) return;
        translationInitialized = true;
        
        const initTime = performance.now() - translationStartTime;
        trackTranslationEvent('translation_init', { performance: Math.round(initTime) });
        
        try {
          // Initialize Google Translate with optimized settings
          new google.translate.TranslateElement({
            pageLanguage: 'nl',
            includedLanguages: 'en,fr,de,es,it,pt,ru,ja,ko,zh,ar,hi,tr,pl,sv,da,no,fi,cs,hu,ro,bg,hr,sk,sl,et,lv,lt,mt,cy,ga,is,lb,eu,ca,gl',
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
            autoDisplay: false,
            multilanguagePage: true
          }, 'google_translate_element');
          
          trackTranslationEvent('translation_loaded', { performance: Math.round(initTime) });
          
          // Auto-translate logic with performance optimization
          if (isProduction) {
            const browserLang = navigator.language || navigator.userLanguage;
            const primaryLang = browserLang.split('-')[0];
            const supportedLanguages = ['en', 'fr', 'de', 'es', 'it', 'pt', 'ru', 'ja', 'ko', 'zh', 'ar', 'hi', 'tr', 'pl', 'sv', 'da', 'no', 'fi', 'cs', 'hu', 'ro', 'bg', 'hr', 'sk', 'sl', 'et', 'lv', 'lt', 'mt', 'cy', 'ga', 'is', 'lb', 'eu', 'ca', 'gl'];
            
            // Auto-translate if not Dutch and supported
            if (primaryLang !== 'nl' && supportedLanguages.includes(primaryLang)) {
              trackTranslationEvent('auto_translate_triggered', { language: primaryLang });
              
              // Optimized element waiting with timeout
              let attempts = 0;
              const maxAttempts = 20; // 10 seconds max
              
              const waitForElement = () => {
                attempts++;
                const selectElement = document.querySelector('.goog-te-combo');
                
                if (selectElement && selectElement.options.length > 1) {
                  selectElement.value = primaryLang;
                  selectElement.dispatchEvent(new Event('change'));
                  
                  trackTranslationEvent('auto_translate_completed', { 
                    language: primaryLang,
                    performance: Math.round(performance.now() - translationStartTime)
                  });
                  
                  // Update page metadata for SEO
                  updatePageMetadata(primaryLang);
                  
                } else if (attempts < maxAttempts) {
                  setTimeout(waitForElement, 500);
                } else {
                  trackTranslationEvent('auto_translate_failed', { language: primaryLang });
                }
              };
              
              setTimeout(waitForElement, 1000);
            } else {
              trackTranslationEvent('no_auto_translate', { reason: 'dutch_or_unsupported' });
            }
          }
          
        } catch (error) {
          trackTranslationEvent('translation_error', { error: error.message });
          console.error('âŒ Google Translate initialization failed:', error);
        }
      }
      
      // SEO optimization for translated pages
      function updatePageMetadata(language) {
        if (!isProduction) return;
        
        const langNames = {
          'en': 'English', 'fr': 'FranÃ§ais', 'de': 'Deutsch', 'es': 'EspaÃ±ol',
          'it': 'Italiano', 'pt': 'PortuguÃªs', 'ru': 'Ğ ÑƒÑÑĞºĞ¸Ğ¹', 'ja': 'æ—¥æœ¬èª',
          'ko': 'í•œêµ­ì–´', 'zh': 'ä¸­æ–‡', 'ar': 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', 'hi': 'à¤¹à¤¿à¤¨à¥à¤¦à¥€'
        };
        
        // Update HTML lang attribute
        document.documentElement.lang = language;
        
        // Update meta description for SEO
        const metaDescription = document.querySelector('meta[name="description"]');
        if (metaDescription && langNames[language]) {
          const originalDesc = metaDescription.content;
          metaDescription.content = `[${langNames[language]}] ${originalDesc}`;
        }
        
        trackTranslationEvent('seo_metadata_updated', { language });
      }
    
      // Enhanced localhost fallback with production-like features
      function createLocalhostFallback() {
        trackTranslationEvent('localhost_fallback_created');
        
        const widget = document.getElementById('google_translate_element');
        if (!widget) return;
        
        // Ensure widget is visible
        widget.style.display = 'block';
        widget.style.visibility = 'visible';
        widget.style.opacity = '1';
        
        widget.innerHTML = `
          <div style="
            background: #fff;
            border: 1px solid #e1e5e9;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 14px;
            min-width: 240px;
            max-width: 320px;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            backdrop-filter: blur(10px);
          ">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
              <div style="font-weight: 600; color: #1a1a1a; display: flex; align-items: center; gap: 8px; font-size: 15px;">
                ğŸŒ Translate Page
              </div>
              <div style="
                background: linear-gradient(135deg, #4285f4, #34a853);
                color: white;
                padding: 4px 8px;
                border-radius: 12px;
                font-size: 10px;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.5px;
              ">DEV</div>
            </div>
            
            <div style="margin-bottom: 16px;">
              <select id="localhost-language-selector" style="
                width: 100%;
                padding: 12px;
                border: 2px solid #e1e5e9;
                border-radius: 8px;
                font-size: 14px;
                background: #fff;
                cursor: pointer;
                transition: border-color 0.2s ease;
                font-family: inherit;
              ">
                <option value="nl">ğŸ‡³ğŸ‡± Nederlands</option>
                <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
                <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
                <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
                <option value="pl">ğŸ‡µğŸ‡± Polski</option>
                <option value="sv">ğŸ‡¸ğŸ‡ª Svenska</option>
                <option value="da">ğŸ‡©ğŸ‡° Dansk</option>
                <option value="no">ğŸ‡³ğŸ‡´ Norsk</option>
                <option value="fi">ğŸ‡«ğŸ‡® Suomi</option>
                <option value="cs">ğŸ‡¨ğŸ‡¿ ÄŒeÅ¡tina</option>
                <option value="hu">ğŸ‡­ğŸ‡º Magyar</option>
                <option value="ro">ğŸ‡·ğŸ‡´ RomÃ¢nÄƒ</option>
                <option value="bg">ğŸ‡§ğŸ‡¬ Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</option>
                <option value="hr">ğŸ‡­ğŸ‡· Hrvatski</option>
                <option value="sk">ğŸ‡¸ğŸ‡° SlovenÄina</option>
                <option value="sl">ğŸ‡¸ğŸ‡® SlovenÅ¡Äina</option>
                <option value="et">ğŸ‡ªğŸ‡ª Eesti</option>
                <option value="lv">ğŸ‡±ğŸ‡» LatvieÅ¡u</option>
                <option value="lt">ğŸ‡±ğŸ‡¹ LietuviÅ³</option>
                <option value="mt">ğŸ‡²ğŸ‡¹ Malti</option>
                <option value="cy">ğŸ‡¬ğŸ‡§ Cymraeg</option>
                <option value="ga">ğŸ‡®ğŸ‡ª Gaeilge</option>
                <option value="is">ğŸ‡®ğŸ‡¸ Ãslenska</option>
                <option value="lb">ğŸ‡±ğŸ‡º LÃ«tzebuergesch</option>
                <option value="eu">ğŸ‡ªğŸ‡¸ Euskera</option>
                <option value="ca">ğŸ‡ªğŸ‡¸ CatalÃ </option>
                <option value="gl">ğŸ‡ªğŸ‡¸ Galego</option>
              </select>
            </div>
            
            <div style="margin-bottom: 16px;">
              <button id="localhost-translate-button" style="
                width: 100%;
                padding: 12px 16px;
                background: linear-gradient(135deg, #4285f4, #34a853);
                color: white;
                border: none;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 4px 12px rgba(66, 133, 244, 0.3);
                font-family: inherit;
              ">Translate Page</button>
            </div>
            
            <div style="
              padding: 12px;
              background: linear-gradient(135deg, #f8f9fa, #e9ecef);
              border-radius: 8px;
              font-size: 12px;
              color: #6c757d;
              text-align: center;
              border-left: 4px solid #4285f4;
              line-height: 1.4;
            ">
              <strong>Development Mode</strong><br>
              <span style="font-size: 11px;">Translation opens in new tab for testing</span>
            </div>
          </div>
          
          <style>
            #localhost-language-selector:focus {
              border-color: #4285f4 !important;
              outline: none;
              box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1) !important;
            }
            
            #localhost-translate-button:hover {
              transform: translateY(-1px);
              box-shadow: 0 6px 16px rgba(66, 133, 244, 0.4) !important;
            }
            
            #localhost-translate-button:active {
              transform: translateY(0);
            }
          </style>
        `;
        
        // Enhanced event listeners with analytics
        const selector = document.getElementById('localhost-language-selector');
        const button = document.getElementById('localhost-translate-button');
        
        if (selector && button) {
          button.addEventListener('click', () => {
            const selectedLang = selector.value;
            trackTranslationEvent('manual_translate_clicked', { language: selectedLang });
            
            const translateUrl = `https://translate.google.com/translate?sl=nl&tl=${selectedLang}&u=${encodeURIComponent(window.location.href)}`;
            window.open(translateUrl, '_blank');
          });
          
          // Set browser language as default if not Dutch
          const browserLang = navigator.language || navigator.userLanguage;
          const primaryLang = browserLang.split('-')[0];
          const supportedLanguages = ['en', 'fr', 'de', 'es', 'it', 'pt', 'ru', 'ja', 'ko', 'zh', 'ar', 'hi', 'tr', 'pl', 'sv', 'da', 'no', 'fi', 'cs', 'hu', 'ro', 'bg', 'hr', 'sk', 'sl', 'et', 'lv', 'lt', 'mt', 'cy', 'ga', 'is', 'lb', 'eu', 'ca', 'gl'];
          
          if (primaryLang !== 'nl' && supportedLanguages.includes(primaryLang)) {
            selector.value = primaryLang;
            trackTranslationEvent('browser_language_detected', { language: primaryLang });
          }
        }
      }
    
      // Production-optimized loading strategy
      function initializeTranslation() {
        if (isLocalhost) {
          trackTranslationEvent('localhost_mode_initialized');
          setTimeout(createLocalhostFallback, 500); // Faster loading for dev
        } else {
          trackTranslationEvent('production_mode_initialized');
          
          // Load Google Translate script with performance optimization
          const script = document.createElement('script');
          script.src = 'https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
          script.async = true;
          script.crossOrigin = 'anonymous';
          script.defer = true;
          
          // Enhanced error handling
          script.onerror = () => {
            trackTranslationEvent('google_translate_load_failed', { reason: 'script_error' });
            createLocalhostFallback();
          };
          
          script.onload = () => {
            trackTranslationEvent('google_translate_script_loaded');
          };
          
          // Add script to head with priority
          document.head.appendChild(script);
          
          // Fallback timeout with progressive enhancement
          let fallbackTimeout = setTimeout(() => {
            if (!window.google || !window.google.translate) {
              trackTranslationEvent('google_translate_timeout_fallback');
              createLocalhostFallback();
            }
          }, 8000); // Increased timeout for better reliability
          
          // Clear timeout if Google Translate loads successfully
          const checkGoogleTranslate = setInterval(() => {
            if (window.google && window.google.translate) {
              clearTimeout(fallbackTimeout);
              clearInterval(checkGoogleTranslate);
            }
          }, 100);
        }
      }
      
      // Initialize with performance tracking
      const startTime = performance.now();
      trackTranslationEvent('translation_system_start', { 
        environment: isLocalhost ? 'localhost' : 'production',
        protocol: window.location.protocol 
      });
      
      // Start initialization
      initializeTranslation();
      
      // Performance monitoring
      setTimeout(() => {
        const totalTime = performance.now() - startTime;
        trackTranslationEvent('translation_system_ready', { 
          total_load_time: Math.round(totalTime) 
        });
      }, 1000);
      
    })(); // End of IIFE
  </script>
  
  <!-- Development Debug Script (localhost only) -->
  <script type="text/javascript">
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
      const debugScript = document.createElement('script');
      debugScript.src = '/debug-translation.js';
      debugScript.defer = true;
      document.head.appendChild(debugScript);
      
      const testScript = document.createElement('script');
      testScript.src = '/test-translation.js';
      testScript.defer = true;
      document.head.appendChild(testScript);
    }
  </script>
  
  <script type="module" src="/src/main.tsx" defer></script>
</body>

</html>